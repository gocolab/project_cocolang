{% extends "templates/main_template.html" %}

{% block title %}board Details{% endblock %}
{% block customize_css %}
<!-- Include Quill stylesheet -->
<link href="https://cdn.jsdelivr.net/npm/quill@2.0.2/dist/quill.snow.css" rel="stylesheet" />
<link href="/css/quilleditors.css" rel="stylesheet" />
{% endblock %}

{% block main_container %}
<form action="" method="post" class="needs-validation" novalidate>
    <div class="row gap-2 px-5">
        <div class="form-group col-12">
            <label class="form-label" for="title">Title:</label>
            <input type="text" class="form-control" id="title" name="title" value="{{ board.title }}" 
                required placeholder="Enter title here">
            <div class="invalid-feedback">
                Title must be filled.
            </div>
        </div>
        <div class="form-group col-12">
            <label class="form-label">Description:</label>
            <textarea class="form-control quill-editor" name="description" required
                placeholder="Enter description here">{{board.description}}</textarea>
            <div class="invalid-feedback">
                Description must be filled.
            </div>
        </div>
        <div class="form-group col-12">
            <label class="form-label" for="order_number">Order Number:</label>
            <input type="number" class="form-control" id="order_number" name="order_number" value="{{board.order_number}}" 
                required placeholder="Enter order number">
            <div class="invalid-feedback">
                Order number must be filled.
            </div>
        </div>
        <div class="form-group col-12">
            <label class="form-label" for="create_user_id">Create User ID:</label>
            <input type="text" class="form-control" id="create_user_id" name="create_user_id" value="{{board.create_user_id}}" 
                placeholder="Enter create user ID">
        </div>
        <div class="form-group col-12">
            <label class="form-label" for="create_user_name">Create User Name:</label>
            <input type="text" class="form-control" id="create_user_name" name="create_user_name" value="{{board.create_user_name}}" 
                placeholder="Enter create user name">
        </div>
        <div class="form-group col-12">
            <label class="form-label" for="parent_id">Parent ID:</label>
            <input type="text" class="form-control" id="parent_id" name="parent_id" value="{{board.parent_id}}" 
                required placeholder="Enter parent ID">
            <div class="invalid-feedback">
                Parent ID must be filled.
            </div>
        </div>
        <div class="form-group col-12">
            <label class="form-label" for="refer_kind_id">Refer Kind ID:</label>
            <input type="text" class="form-control" id="refer_kind_id" name="refer_kind_id" value="{{board.refer_kind_id}}" 
                placeholder="Enter refer kind ID">
        </div>
        <div class="form-group col-12">
            <label class="form-label" for="refer_kind_name">Refer Kind Name:</label>
            <input type="text" class="form-control" id="refer_kind_name" name="refer_kind_name" value="{{board.refer_kind_name}}" 
                placeholder="Enter refer kind name">
        </div>
        <div class="col-12 d-flex justify-content-end">
            <div class="form-group">
                {% if board.id or "ADMIN" in request.state.user.roles %}
                <button type="submit" class="btn btn-danger" formaction="/board/update/{{board.id}}">
                    Update
                </button>
                {% else %}
                <button type="submit" class="btn btn-danger" formaction="/board/insert">
                    Insert
                </button>
                {% endif %}
                <button type="submit" class="btn btn-primary" formaction="/board/list" formmethod="get">
                    List
                </button>
            </div>
        </div>
    </div>
</form>

{% endblock %}

{% block foot_javascripts %}
<!-- Include Quill library -->
<script src="https://cdn.jsdelivr.net/npm/quill@2.0.2/dist/quill.js"></script>

<script src="/js/forms.js" defer></script>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        let deltaObject = {{ board.description | tojson | safe if board.description else "{}" }};
        initializeForm(deltaObject);
    });
</script>

{% endblock %}